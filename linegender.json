{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Stock prices of 5 Tech Companies over Time.",
  "width": 890,
   "data": { "values": [
    {"question": "Nagano", "type": "1", "value": 87.68, "Region": "Chubu"},
    {"question": "Nagano", "type": "2", "value": 81.75, "Region": "Chubu"},
    {"question": "Shiga", "type": "1", "value": 87.57, "Region": "Kansai"},
    {"question": "Shiga", "type": "2", "value": 81.78, "Region": "Kansai"},
    {"question": "Fukui", "type": "1", "value": 87.54, "Region": "Chubu"},
    {"question": "Fukui", "type": "2", "value": 81.27, "Region": "Chubu"},
    {"question": "Kyoto", "type": "1", "value": 87.35, "Region": "Kansai"},
    {"question": "Kyoto", "type": "2", "value": 81.40, "Region": "Kansai"},
    {"question": "Kumamoto", "type": "1", "value": 87.49, "Region": "Kyushu"},
    {"question": "Kumamoto", "type": "2", "value": 81.22, "Region": "Kyushu"},
    {"question": "Okayama", "type": "2", "value": 81.03, "Region": "Chugoku"},
    {"question": "Okayama", "type": "1", "value": 87.67, "Region": "Chugoku"},
    {"question": "Nara", "type": "1", "value": 87.25, "Region": "Kansai"},
    {"question": "Nara", "type": "2", "value": 81.36, "Region": "Kansai"},
    {"question": "Kanagawa", "type": "1", "value": 87.24, "Region": "Kanto"},
    {"question": "Kanagawa", "type": "2", "value": 81.32, "Region": "Kanto"},
    {"question": "Shimane", "type": "1", "value": 87.64, "Region": "Chugoku"},
    {"question": "Shimane", "type": "2", "value": 80.79, "Region": "Chugoku"},
    {"question": "Hiroshima", "type": "1", "value": 87.33, "Region": "Chugoku"},
    {"question": "Hiroshima", "type": "2", "value": 81.08, "Region": "Chugoku"},
    {"question": "Oita", "type": "1", "value": 87.31, "Region": "Kyushu"},
    {"question": "Oita", "type": "2", "value": 81.08, "Region": "Kyushu"},
    {"question": "Tokyo", "type": "1", "value": 87.26, "Region": "Kanto"},
    {"question": "Tokyo", "type": "2", "value": 81.07, "Region": "Kanto"},
    {"question": "Ishikawa", "type": "1", "value": 87.28, "Region": "Chubu"},
    {"question": "Ishikawa", "type": "2", "value": 81.04, "Region": "Chubu"},
    {"question": "Miyagi", "type": "1", "value": 87.16, "Region": "Tohoku"},
    {"question": "Miyagi", "type": "2", "value": 80.99, "Region": "Tohoku"},
    {"question": "Yamanashi", "type": "1", "value": 87.22, "Region": "Chubu"},
    {"question": "Yamanashi", "type": "2", "value": 80.85, "Region": "Chubu"},
    {"question": "Shizuoka", "type": "1", "value": 87.10, "Region": "Chubu"},
    {"question": "Shizuoka", "type": "2", "value": 80.95, "Region": "Chubu"},
    {"question": "Kagawa", "type": "1", "value": 87.21, "Region": "Shikoku"},
    {"question": "Kagawa", "type": "2", "value": 80.85, "Region": "Shikoku"},
    {"question": "Toyama", "type": "1", "value": 87.42, "Region": "Chubu"},
    {"question": "Toyama", "type": "2", "value": 80.61, "Region": "Chubu"},
    {"question": "Niigata", "type": "1", "value": 87.32, "Region": "Chubu"},
    {"question": "Niigata", "type": "2", "value": 80.69, "Region": "Chubu"},
    {"question": "Hyogo", "type": "1", "value": 87.07, "Region": "Kansai"},
    {"question": "Hyogo", "type": "2", "value": 80.92, "Region": "Kansai"},
    {"question": "Aichi", "type": "1", "value": 86.86, "Region": "Chubu"},
    {"question": "Aichi", "type": "2", "value": 81.10, "Region": "Chubu"},
    {"question": "Chiba", "type": "1", "value": 86.91, "Region": "Kanto"},
    {"question": "Chiba", "type": "2", "value": 80.96, "Region": "Kanto"},
    {"question": "Mie", "type": "1", "value": 86.99, "Region": "Kansai"},
    {"question": "Mie", "type": "2", "value": 80.86, "Region": "Kansai"},
    {"question": "Gifu", "type": "1", "value": 86.82, "Region": "Chubu"},
    {"question": "Gifu", "type": "2", "value": 81.00, "Region": "Chubu"},
    {"question": "Fukuoka", "type": "1", "value": 87.14, "Region": "Kyushu"},
    {"question": "Fukuoka", "type": "2", "value": 80.66, "Region": "Kyushu"},
    {"question": "Saga", "type": "1", "value": 87.12, "Region": "Kyushu"},
    {"question": "Saga", "type": "2", "value": 80.65, "Region": "Kyushu"},
    {"question": "Okinawa", "type": "1", "value": 87.44, "Region": "Kyushu"},
    {"question": "Okinawa", "type": "2", "value": 80.27, "Region": "Kyushu"},
    {"question": "Saitama", "type": "1", "value": 86.66, "Region": "Kanto"},
    {"question": "Saitama", "type": "2", "value": 80.82, "Region": "Kanto"},
    {"question": "Yamagata", "type": "1", "value": 86.96, "Region": "Tohoku"},
    {"question": "Yamagata", "type": "2", "value": 80.52, "Region": "Tohoku"},
    {"question": "Gunma", "type": "1", "value": 86.84, "Region": "Kanto"},
    {"question": "Gunma", "type": "2", "value": 80.61, "Region": "Kanto"},
    {"question": "Miyazaki", "type": "1", "value": 87.12, "Region": "Kyushu"},
    {"question": "Miyazaki", "type": "2", "value": 80.34, "Region": "Kyushu"},
    {"question": "Tottori", "type": "1", "value": 87.27, "Region": "Chugoku"},
    {"question": "Tottori", "type": "2", "value": 80.17, "Region": "Chugoku"},
    {"question": "Yamaguchi", "type": "1", "value": 86.88, "Region": "Chugoku"},
    {"question": "Yamaguchi", "type": "2", "value": 80.51, "Region": "Chugoku"},
    {"question": "Nagasaki", "type": "1", "value": 86.97, "Region": "Kyushu"},
    {"question": "Nagasaki", "type": "2", "value": 80.38, "Region": "Kyushu"},
    {"question": "Kochi", "type": "1", "value": 87.01, "Region": "Shikoku"},
    {"question": "Kochi", "type": "2", "value": 80.26, "Region": "Shikoku"},
    {"question": "Hokkaido", "type": "1", "value": 86.77, "Region": "Hokkaido"},
    {"question": "Hokkaido", "type": "2", "value": 80.28, "Region": "Hokkaido"},
    {"question": "Tokushima", "type": "1", "value": 86.66, "Region": "Shikoku"},
    {"question": "Tokushima", "type": "2", "value": 80.32, "Region": "Shikoku"},
    {"question": "Ehime", "type": "1", "value": 86.82, "Region": "Shikoku"},
    {"question": "Ehime", "type": "2", "value": 80.16, "Region": "Shikoku"},
    {"question": "Osaka", "type": "1", "value": 86.73, "Region": "Kansai"},
    {"question": "Osaka", "type": "2", "value": 80.23, "Region": "Kansai"},
    {"question": "Kagoshima", "type": "1", "value": 86.78, "Region": "Kyushu"},
    {"question": "Kagoshima", "type": "2", "value": 80.02, "Region": "Kyushu"},
    {"question": "Ibaraki", "type": "1", "value": 86.33, "Region": "Kanto"},
    {"question": "Ibaraki", "type": "2", "value": 80.28, "Region": "Kanto"},
    {"question": "Fukushima", "type": "1", "value": 86.40, "Region": "Tohoku"},
    {"question": "Fukushima", "type": "2", "value": 80.12, "Region": "Tohoku"},
    {"question": "Wakayama", "type": "1", "value": 86.47, "Region": "Kansai"},
    {"question": "Wakayama", "type": "2", "value": 79.94, "Region": "Kansai"},
    {"question": "Tochigi", "type": "1", "value": 86.24, "Region": "Kanto"},
    {"question": "Tochigi", "type": "2", "value": 80.10, "Region": "Kanto"},
    {"question": "Iwate", "type": "1", "value": 86.44, "Region": "Tohoku"},
    {"question": "Iwate", "type": "2", "value": 79.86, "Region": "Tohoku"},
    {"question": "Akita", "type": "1", "value": 86.38, "Region": "Tohoku"},
    {"question": "Akita", "type": "2", "value": 79.51, "Region": "Tohoku"},
    {"question": "Aomori", "type": "1", "value": 85.93, "Region": "Tohoku"},
    {"question": "Aomori", "type": "2", "value": 78.67, "Region": "Tohoku"}
  ]},
  "params": [
    {
    "name": "Region_Selection",
    "bind": {
    "input": "select",
    "options": [
     null,
    "Chubu",
    "Kansai",
    "Kyushu",
    "Chugoku",
    "Kanto",
    "Shikoku",
    "Hokkaido",
    "Tohoku"
    ],
    "labels":[
    "Show All",
    "Chubu",
    "Kansai",
    "Kyushu",
    "Chugoku",
    "Kanto",
    "Shikoku",
    "Hokkaido",
    "Tohoku"
    ],
    "name": "Region Selection "
    }
    }
    ],
    "layer":[
      {
    "transform": [
    {"calculate": "datum.type == 1 ? 'Female' : 'Male'", "as": "Gender"},
     {"filter": "Region_Selection == null || datum.Region == Region_Selection"}
    ],
  "mark": {
  "type": "line",
  "point": true
  },
  "encoding": {
    "x": {"field": "question", "type": "nominal", "title": "Prefecture"},
    "tooltip": [
      {"field": "question", "type": "nominal", "title": "Prefecture"},
      {"field": "value", "type": "quantitative", "title": "Life Expectancy"},
      {"field": "Gender", "type": "nominal", "title": "Gender"}
      ],
    "y": {"field": "value", "type": "quantitative", "title":"Life Expectancy",
     "scale": {"domain": [78,88]}},
    "color": {"field": "Gender", "type": "nominal", "scale": {"range": ["#F971C5", "#1027FB"]}
  }
  }
      },
      {
        "transform": [
      {
        "calculate": "'Highest for men: Shiga'", "as": "annotation"
      }
    ],
    "mark":{"type": "text", "align": "left", "dx": 150, "dy": 0, "fontWeight": "lighter", "font": "Courier New", "fontSize": 13},
    "encoding":{
      "text": {"field": "annotation"},
      "color": {"value": "blue"}
      
    }
  },
  {
    "transform": [
      {
        "calculate": "'Highest for women: Nagano'", "as": "annotation"
      }
    ],
    "mark":{"type": "text", "align": "left", "dx": -50, "dy": -55, "fontWeight": "lighter", "font": "Courier New", "fontSize": 13},
    "encoding":{
      "text": {"field": "annotation"},
      "color": {"value": "#F971C5"}
  }
  }
    ],
  "config":{
    "background": null
  }
}
